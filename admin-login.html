<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Login – Country Farm Matugga</title>
    <meta name="robots" content="noindex, nofollow">
    <link rel="icon" type="image/png" href="Logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style"
          href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
          onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap">
    </noscript>
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', system-ui, sans-serif;
            min-height: 100vh;
            display: flex; align-items: center; justify-content: center;
            background: linear-gradient(135deg, #0f1e07 0%, #2d5016 55%, #4a7c2d 100%);
            padding: 1rem;
        }

        .card {
            background: #fff;
            border-radius: 20px;
            padding: 2.4rem 2.2rem;
            width: 100%; max-width: 400px;
            box-shadow: 0 24px 60px rgba(0,0,0,0.35);
            animation: up .45s ease both;
        }
        @keyframes up { from { opacity:0; transform:translateY(22px); } to { opacity:1; transform:none; } }

        .brand { text-align: center; margin-bottom: 1.8rem; }
        .brand img  { height: 80px; width: auto; margin-bottom: .6rem; }
        .brand h1   { font-size: 1.35rem; color: #2d5016; font-weight: 700; line-height: 1.2; }
        .brand p    { font-size: .85rem; color: #718096; margin-top: .2rem; }

        hr { border: none; border-top: 1px solid #e2e8f0; margin-bottom: 1.6rem; }

        .err {
            background: #fff5f5; border: 1px solid #fecaca;
            border-radius: 8px; padding: .7rem 1rem;
            color: #b91c1c; font-size: .86rem;
            display: none; align-items: center; gap: .5rem;
            margin-bottom: 1.1rem;
        }
        .err.show { display: flex; }

        .fg { margin-bottom: 1.1rem; }
        .fg label { display: block; font-size: .83rem; font-weight: 600; color: #2d3748; margin-bottom: .35rem; }
        .wrap { position: relative; }
        .wrap .ico {
            position: absolute; left: .85rem; top: 50%; transform: translateY(-50%);
            color: #a0aec0; pointer-events: none;
        }
        .wrap input {
            width: 100%; padding: .8rem 1rem .8rem 2.5rem;
            border: 2px solid #e2e8f0; border-radius: 10px;
            font-size: .93rem; font-family: inherit;
            color: #1a202c; background: #f8fafc;
            transition: border-color .2s, box-shadow .2s;
        }
        .wrap input:focus { outline: none; border-color: #d4af37; box-shadow: 0 0 0 3px rgba(212,175,55,.15); background: #fff; }
        .eye {
            position: absolute; right: .75rem; top: 50%; transform: translateY(-50%);
            background: none; border: none; cursor: pointer; color: #a0aec0; padding: .2rem;
        }
        .eye:hover { color: #2d5016; }

        .submit {
            width: 100%; padding: .9rem;
            background: #2d5016; color: #fff;
            border: none; border-radius: 10px;
            font-size: .97rem; font-weight: 700; font-family: inherit;
            cursor: pointer; display: flex; align-items: center; justify-content: center; gap: .5rem;
            transition: background .2s, transform .15s, box-shadow .2s;
        }
        .submit:hover { background: #3d6b1e; transform: translateY(-1px); box-shadow: 0 4px 14px rgba(45,80,22,.3); }
        .submit:disabled { opacity: .65; cursor: not-allowed; transform: none; }
        .submit .spin {
            width: 18px; height: 18px;
            border: 2px solid rgba(255,255,255,.4); border-top-color: #fff;
            border-radius: 50%; animation: spin .7s linear infinite; display: none;
        }
        .submit.loading .txt  { display: none; }
        .submit.loading .spin { display: block; }
        @keyframes spin { to { transform:rotate(360deg); } }

        .back { display: block; text-align: center; margin-top: 1.3rem; font-size: .84rem; color: #718096; text-decoration: none; }
        .back:hover { color: #2d5016; }

        .creds {
            margin-top: 1.4rem; padding: .9rem 1rem;
            background: #f0f9f4; border-radius: 8px;
            font-size: .8rem; color: #2d5016;
            border: 1px solid #c6e8d5;
        }
        .creds strong { display: block; margin-bottom: .3rem; }
    </style>
</head>
<body>
<div class="card">
    <div class="brand">
        <img src="Logo.png" alt="Country Farm Matugga logo">
        <h1>Country Farm Matugga</h1>
        <p>Admin Dashboard Login</p>
    </div>
    <hr>

    <div class="err" id="errBox">
        <svg width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
        <span id="errMsg">Invalid email or password.</span>
    </div>

    <form id="loginForm" novalidate>
        <div class="fg">
            <label for="email">Email Address</label>
            <div class="wrap">
                <svg class="ico" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                <input type="email" id="email" placeholder="admin@cfm.com" autocomplete="username" required>
            </div>
        </div>
        <div class="fg">
            <label for="password">Password</label>
            <div class="wrap">
                <svg class="ico" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                <input type="password" id="password" placeholder="••••••••" autocomplete="current-password" required>
                <button type="button" class="eye" id="eyeBtn" aria-label="Toggle password">
                    <svg id="eyeShow" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                    <svg id="eyeHide" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="display:none"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
                </button>
            </div>
        </div>

        <button type="submit" class="submit" id="submitBtn">
            <span class="txt">Sign In to Dashboard</span>
            <div class="spin"></div>
        </button>
    </form>

    <div class="creds">
        <strong>Default login credentials:</strong>
        Email: admin@cfm.com<br>
        Password: Passw0rd<br>
        <span style="opacity:.7;">(Change these in Admin → Settings after logging in)</span>
    </div>

    <a href="index.html" class="back">← Back to website</a>
</div>

<script>
    var DEFAULT_EMAIL = 'admin@cfm.com';
    var DEFAULT_PASS  = 'Passw0rd';

    // If already logged in, go straight to dashboard
    if (localStorage.getItem('cfm_admin_auth') === 'true') {
        window.location.replace('admin.html');
    }

    // Password toggle
    document.getElementById('eyeBtn').addEventListener('click', function() {
        var inp = document.getElementById('password');
        var isText = inp.type === 'text';
        inp.type = isText ? 'password' : 'text';
        document.getElementById('eyeShow').style.display = isText ? '' : 'none';
        document.getElementById('eyeHide').style.display = isText ? 'none' : '';
    });

    function showErr(msg) {
        document.getElementById('errMsg').textContent = msg || 'Invalid email or password.';
        document.getElementById('errBox').classList.add('show');
    }
    function hideErr() { document.getElementById('errBox').classList.remove('show'); }

    document.getElementById('email').addEventListener('input', hideErr);
    document.getElementById('password').addEventListener('input', hideErr);

    document.getElementById('loginForm').addEventListener('submit', function(e) {
        e.preventDefault();
        hideErr();

        var email = document.getElementById('email').value.trim();
        var pass  = document.getElementById('password').value;
        var btn   = document.getElementById('submitBtn');

        if (!email || !pass) { showErr('Please enter your email and password.'); return; }

        btn.classList.add('loading');
        btn.disabled = true;

        // Small artificial delay for UX feedback
        setTimeout(function() {
            var storedEmail = localStorage.getItem('cfm_admin_email') || DEFAULT_EMAIL;
            var storedPass  = localStorage.getItem('cfm_admin_pass')  || DEFAULT_PASS;

            if (email === storedEmail && pass === storedPass) {
                localStorage.setItem('cfm_admin_auth', 'true');
                window.location.href = 'admin.html';
            } else {
                btn.classList.remove('loading');
                btn.disabled = false;
                document.getElementById('password').value = '';
                showErr('Incorrect email or password. Please try again.');
            }
        }, 500);
    });
</script>
</body>
</html>
